<h1 class="text-4xl font-bold mb-8 text-center mt-4">Job Experience</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
  <div
    *ngFor="let job of jobExperiences; let i = index"
    class="bg-white shadow-lg rounded-lg p-6 flex flex-col relative overflow-hidden"
  >
    <!-- Shadow Decoration -->
    <div class="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500"></div>

    <!-- Job Details -->
    <h2 class="text-2xl font-bold mb-2">{{ job.title }}</h2>
    <p class="text-sm text-muted-foreground mb-2">
      <strong>Company:</strong> {{ job.company }}
    </p>
    <p class="text-sm text-muted-foreground mb-2">
      <strong>Duration:</strong> {{ job.duration }}
    </p>
    <div style="display: flex; align-items: flex-start;" class="mb-4">
      <!-- Gambar -->
      <div style="cursor: pointer" *ngIf="job?.image" class="mr-4">
        <a [href]="job?.url" target="_blank" rel="noopener noreferrer">
          <img
            [src]="job?.image"
            [alt]="job?.company"
            class="w-10 object-contain rounded-md"
          />
        </a>
      </div>
    </div>

    <p class="text-sm text-muted-foreground mb-4">{{ job.description }}</p>

    <!-- Tasks -->
    <ul *ngIf="!job.projects" class="text-sm mb-4">
      <li *ngFor="let task of job?.tasks">
        - {{ task }}
      </li>
    </ul>

    <!-- Projects Carousel -->
    <div *ngIf="job.projects" class="relative mt-4">
      <h3 class="text-lg font-semibold mb-2">Projects:</h3>

      <!-- Tombol Prev -->
      <button
        class="carousel-button left"
        (click)="scrollLeft(i)"
      >
        ◀
      </button>

      <!-- Kontainer Carousel -->
      <div
        #carouselRef
        class="flex-overflow"
      >
        <div
          *ngFor="let proj of job.projects"
          class="card"
        >
          <h4 class="text-base font-bold mb-2">{{ proj.name }}</h4>
          <p class="text-sm text-muted-foreground mb-2">{{ proj.description }}</p>
          <div *ngIf="proj?.image" class="mb-4">
            <a [href]="proj?.url" target="_blank" rel="noopener noreferrer">
              <img
                [src]="proj?.image"
                [alt]="'company'"
                class="w-10 object-contain rounded-md"
              />
            </a>
          </div>
          <ul class="text-sm mb-2">
            <li *ngFor="let task of proj.tasks">- {{ task }}</li>
          </ul>
          <div class="flex gap-2 flex-wrap">
            <span
              *ngFor="let tech of proj.technologies"
              class="inline-block px-3 py-1 bg-gray-200 text-sm rounded-md"
            >
              {{ tech }}
            </span>
          </div>
        </div>
      </div>

      <!-- Tombol Next -->
      <button
        class="carousel-button right"
        (click)="scrollRight(i)"
      >
        ▶
      </button>
    </div>

    <!-- Technologies -->
    <div class="flex gap-2 flex-wrap mt-4">
      <span
        *ngFor="let tech of job?.technologies"
        class="inline-block px-3 py-1 bg-gray-200 text-sm rounded-md"
      >
        {{ tech }}
      </span>
    </div>
  </div>
</div>
